
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MAST Query Tutorial for NIRSpec Users &#8212; STScI JDAT Notebooks</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/stsci_logo2.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">STScI JDAT Notebooks</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Welcome JDAT Notebooks
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  NIRISS WFSS Spectra
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../NIRISS_WFSS_postpipeline/00.%20Optimal%20extraction.html">
   Part 0: Optimal Extraction of NIRISS WFSS Spectrum
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NIRISS_WFSS_postpipeline/01.%20Combine%20and%20normalize%201D%20spectra.html">
   Part 1: Combine One-Dimensional NIRISS WFSS Spectra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NIRISS_WFSS_postpipeline/02.%20Cross%20correlation%20template.html">
   Part 2: Cross Correlation to Determine Redshift of NIRISS WFSS Spectra
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../NIRISS_WFSS_postpipeline/03.%20Spatially%20resolved%20emission%20line%20map.html">
   Part 3: Spatially Resolved Emission Line Map of NIRISS WFSS Spectra
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MOS Spectroscopy
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../mos-spectroscopy/MOSspec_sv06_revised.html">
   MOS Spectroscopy of Typical Extragalactic Field
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MRS Mstar Analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../MRS_Mstar_analysis/JWST_Mstar_dataAnalysis_usecase.html">
   JWST Data Analysis Use Case: MIRI MRS Spectroscopy of a Late M Star
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Example Notebook
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../example_notebook/example_notebook.html">
   Draft: Notebook title
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  IFU Continuum Fit
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../IFU_cube_continuum_fit/NGC4151_FeII_ContinuumFit.html">
   IFU Data Modeling NGC 4151 Notebook #1  - Isolating Line Emission
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  PSF Matched Photometry
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../NIRCam_PSF-matched_photometry/NIRCam_PSF_matched_multiband_photometry.html">
   NIRCam PSF-matched multiband photometry
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MIRI IFU in the LMC
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../MIRI_IFU_YSOs_in_the_LMC/isha_nayak_ysos_in_the_lmc.html">
   JWST Data Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../optimal_extraction/Spectral%20Extraction-static.html">
   NIRSpec MOS Optimal Spectral Extraction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ifu_optimal/ifu_optimal.html">
   Baseline: NIRSpec IFU Optimal Point Source Extraction
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/NIRSpec_MAST_Query/NIRSpec_MAST_Query.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/therealzoidberg/pyinthehub"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/therealzoidberg/pyinthehub/issues/new?title=Issue%20on%20page%20%2Fnotebooks/NIRSpec_MAST_Query/NIRSpec_MAST_Query.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/therealzoidberg/pyinthehub/main?urlpath=tree/notebooks/notebooks/NIRSpec_MAST_Query/NIRSpec_MAST_Query.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-goals">
   Learning Goals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#main-content">
   Main Content
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#perform-a-search-for-all-nirspec-data">
     Perform a search for all NIRSpec Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-one-query-parameter">
     Use one query parameter:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-multiple-query-parameters">
     Use multiple query parameters:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-list-of-available-filtering-parameters-in-the-archive">
     A list of available filtering parameters in the Archive:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#potential-duplication-checks">
   Potential Duplication Checks
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#additional-resources">
     Additional Resources
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#about-this-notebook">
       About this Notebook:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>MAST Query Tutorial for NIRSpec Users</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-goals">
   Learning Goals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#main-content">
   Main Content
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#perform-a-search-for-all-nirspec-data">
     Perform a search for all NIRSpec Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-one-query-parameter">
     Use one query parameter:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#use-multiple-query-parameters">
     Use multiple query parameters:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-list-of-available-filtering-parameters-in-the-archive">
     A list of available filtering parameters in the Archive:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#potential-duplication-checks">
   Potential Duplication Checks
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#additional-resources">
     Additional Resources
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#about-this-notebook">
       About this Notebook:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="mast-query-tutorial-for-nirspec-users">
<h1>MAST Query Tutorial for NIRSpec Users<a class="headerlink" href="#mast-query-tutorial-for-nirspec-users" title="Permalink to this headline">¶</a></h1>
<div class="section" id="learning-goals">
<h2>Learning Goals<a class="headerlink" href="#learning-goals" title="Permalink to this headline">¶</a></h2>
<p>By the end of this tutorial, you will:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1) Be able to perform MAST queries for NIRSpec data 
2) Understand MAST search options for NIRSpec MOS, IFU, and Fixed Slit data
3) Filter MAST queries by various parameters
4) Perform potential duplication checks for your targets
</pre></div>
</div>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>MAST (Barbara A. Mikulski Archive for Space Telescopes) provides a means of retrieving data through a variety of methods. The <a class="reference external" href="https://outerspace.stsci.edu/display/MASTDOCS/Portal+Guide">MAST Portal</a> allows users to interactively search for particular observations and filter by keywords. An in-depth <a class="reference external" href="https://outerspace.stsci.edu/display/MASTDOCS/Portal+Guide">tutorial</a> is available to aid users in accessing MAST in this manner. In some scenarios, particularly with large queries, it may be more efficient to use <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/mast/mast.html">Astroquery</a>. Some broad capabilities including positional queries, metadata queries, and catalog queries are described in the documentation. General documentation on the <a class="reference external" href="https://mast.stsci.edu/api/v0/">MAST API</a> is also available.</p>
<p>One reason why users may want to search the archive is to find potential duplicatation observations for their proposals. As described in the <a class="reference external" href="https://jwst-docs.stsci.edu/jwst-opportunities-and-policies/jwst-general-science-policies/jwst-duplicate-observations-policy">JWST Duplicate Observations Policy</a>, an observation may be a duplication of another observation if it observes the same astronomical source or field with the same instrument as well as similar sensitivity and spectral range. More instrument-specific details can be found in the documentation.</p>
<p>The following topics are covered in this notebook:</p>
<ol class="simple">
<li><p>How to submit a NIRSpec MAST Query using python</p>
<ul class="simple">
<li><p>How to perform a broad search for all NIRSpec Data</p></li>
<li><p>How to perform a search using one query filter parameter</p></li>
<li><p>How to perform a search using multiple query filter parameters</p></li>
<li><p>Information on available search parameters</p></li>
</ul>
</li>
<li><p>How to perform checks for potential duplication issues with any given targets by comparing with pre-existing MAST Data (NOTE: This may not include scheduled observations, and results should be confirmed in APT)</p>
<ul class="simple">
<li><p>Define an input catalog describing a potential observation</p></li>
<li><p>Query MAST within a search radius for observations with overlapping wavelengths and similar exposure times</p></li>
<li><p>Examine potential for duplicate observations</p></li>
</ul>
</li>
</ol>
<p>Although this notebook is designed for NIRSpec users, other JWST instruments follow similar structures for MAST queries. More information that may be relevant to additional instruments can be found on the <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/mast/mast.html">Astroquery</a> web page.</p>
</div>
<div class="section" id="main-content">
<h2>Main Content<a class="headerlink" href="#main-content" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import MAST</span>
<span class="kn">from</span> <span class="nn">astroquery.mast</span> <span class="kn">import</span> <span class="n">Mast</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="n">Input</span> <span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Import MAST</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">astroquery.mast</span> <span class="kn">import</span> <span class="n">Mast</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;astroquery&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="perform-a-search-for-all-nirspec-data">
<h3>Perform a search for all NIRSpec Data<a class="headerlink" href="#perform-a-search-for-all-nirspec-data" title="Permalink to this headline">¶</a></h3>
<p>This first example demonstrates how to use <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/api/astroquery.mast.MastClass.html#astroquery.mast.MastClass.service_request_async">Mast.service_request_async()</a>, which builds and executes a <a class="reference external" href="https://mast.stsci.edu/api/v0/class_mashup_1_1_mashup_request.html">Mashup</a> query based upon a service and parameters. More information and description of options can be found in the <a class="reference external" href="https://mast.stsci.edu/api/v0/class_mashup_1_1_mashup_request.html">documentation</a>. The response in this format provides a format which can list filenames.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up the service for whichever instrument you want to query. Format with the first letter capitalized only.</span>
<span class="n">service</span> <span class="o">=</span> <span class="s2">&quot;Mast.Jwst.Filtered.Nirspec&quot;</span>

<span class="c1"># Enter query parameters, or leave empty (as shown here) to retrieve all data for that instrument.</span>
<span class="c1"># Leaving &#39;columns&#39; as an asterisk includes all data columns. Replacing &#39;columns&#39; with COUNT_BIG(*) will </span>
<span class="c1">#     return the number of files in the search.</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
               <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="c1"># Retrieve the MAST response (this step may take a few seconds)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">Mast</span><span class="o">.</span><span class="n">service_request_async</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Gather the results</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Take the filename from each result if you prefer a list of filenames</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print the first ten filenames</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filenames</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;jw84600007001_02101_00001_nrs1_rate&#39;, &#39;jw93125002001_02103_00001_nrs2_rate&#39;, &#39;jw84600041001_02101_00001_nrs2_uncal&#39;, &#39;jw95065009001_02104_00001_nrs2_rate&#39;, &#39;jw84600008001_02101_00002_nrs2_rate&#39;, &#39;jw96216006001_02101_00001_nrs2_dark&#39;, &#39;jw84600013001_02102_00001_nrs2_dark&#39;, &#39;jw95065009001_02103_00001_nrs1_rate&#39;, &#39;jw95065006001_02107_00001_nrs2_rate&#39;, &#39;jw95065009001_02101_00001_nrs2_rate&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="use-one-query-parameter">
<h3>Use one query parameter:<a class="headerlink" href="#use-one-query-parameter" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enter one query parameter:</span>
<span class="n">service</span> <span class="o">=</span> <span class="s2">&quot;Mast.Jwst.Filtered.Nirspec&quot;</span>
<span class="n">one_parameter</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
               <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;paramName&quot;</span><span class="p">:</span> <span class="s2">&quot;exp_type&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NRS_MSASPEC&#39;</span><span class="p">]</span>
                            <span class="p">}]</span>
             <span class="p">}</span>
<span class="n">response_one_parameter</span> <span class="o">=</span> <span class="n">Mast</span><span class="o">.</span><span class="n">service_request_async</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">one_parameter</span><span class="p">)</span>
<span class="n">results_one_parameter</span> <span class="o">=</span> <span class="n">response_one_parameter</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
<span class="c1"># Print the first ten filenames</span>
<span class="k">for</span> <span class="n">result_one_parameter</span> <span class="ow">in</span> <span class="n">results_one_parameter</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result_one_parameter</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>jw93125002001_02103_00001_nrs2_rate
jw95065009001_02104_00001_nrs2_rate
jw84600008001_02101_00002_nrs2_rate
jw95065009001_02103_00001_nrs1_rate
jw95065006001_02107_00001_nrs2_rate
jw95065009001_02101_00001_nrs2_rate
jw95065009001_02101_00001_nrs1_rate
jw95065006001_02103_00001_nrs1_rate
jw95065006001_02108_00001_nrs1_rate
jw95065009001_02104_00001_nrs1_rate
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="use-multiple-query-parameters">
<h3>Use multiple query parameters:<a class="headerlink" href="#use-multiple-query-parameters" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use multiple query parameters</span>
<span class="n">service</span> <span class="o">=</span> <span class="s2">&quot;Mast.Jwst.Filtered.Nirspec&quot;</span>
<span class="n">multiple_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
               <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;paramName&quot;</span><span class="p">:</span> <span class="s2">&quot;apername&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NRS1_FULL&#39;</span><span class="p">,</span> <span class="s1">&#39;NRS_FULL_MSA&#39;</span><span class="p">]</span>
                            <span class="p">},</span>
                            <span class="p">{</span><span class="s2">&quot;paramName&quot;</span><span class="p">:</span> <span class="s2">&quot;detector&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NRS1&#39;</span><span class="p">]</span>
                            <span class="p">},</span>
                            <span class="p">{</span><span class="s2">&quot;paramName&quot;</span><span class="p">:</span> <span class="s2">&quot;filter&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;F290LP&#39;</span><span class="p">,</span> <span class="s1">&#39;F170LP&#39;</span><span class="p">]</span>
                            <span class="p">},</span>
                            <span class="p">{</span><span class="s2">&quot;paramName&quot;</span><span class="p">:</span> <span class="s2">&quot;exp_type&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NRS_IFU&#39;</span><span class="p">,</span> <span class="s1">&#39;NRS_MSASPEC&#39;</span><span class="p">,</span> <span class="s1">&#39;NRS_BRIGHTOBJ&#39;</span><span class="p">,</span><span class="s1">&#39;NRS_WATA&#39;</span><span class="p">]</span>
                            <span class="p">},</span>
                            <span class="p">{</span><span class="s2">&quot;paramName&quot;</span><span class="p">:</span> <span class="s2">&quot;readpatt&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;NRS&#39;</span><span class="p">,</span> <span class="s1">&#39;NRSRAPID&#39;</span><span class="p">]</span>
                            <span class="p">}</span>
                            <span class="p">]}</span>
<span class="n">response_multiple_parameters</span> <span class="o">=</span> <span class="n">Mast</span><span class="o">.</span><span class="n">service_request_async</span><span class="p">(</span><span class="n">service</span><span class="p">,</span> <span class="n">multiple_parameters</span><span class="p">)</span>
<span class="n">results_multiple_parameters</span> <span class="o">=</span> <span class="n">response_multiple_parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
<span class="c1"># Print the first ten filenames</span>
<span class="k">for</span> <span class="n">result_multiple_parameters</span> <span class="ow">in</span> <span class="n">results_multiple_parameters</span><span class="p">[:</span><span class="mi">10</span><span class="p">]:</span>
    <span class="c1"># In addition to the filename, additional parameters can be printed. See below for a list of available options.</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result_multiple_parameters</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;     &#39;</span> <span class="o">+</span> <span class="n">result_multiple_parameters</span><span class="p">[</span><span class="s1">&#39;visitype&#39;</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>jw95065006001_02108_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw95065009001_02104_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw93125002001_02102_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw93125002001_02101_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw95065006001_02107_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw95065009001_02106_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw93125002001_02103_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw93125002001_02105_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw95065006001_02105_00001_nrs1_rate     PRIME_TARGETED_FIXED
jw93125002001_02104_00001_nrs1_rate     PRIME_TARGETED_FIXED
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="a-list-of-available-filtering-parameters-in-the-archive">
<h3>A list of available filtering parameters in the Archive:<a class="headerlink" href="#a-list-of-available-filtering-parameters-in-the-archive" title="Permalink to this headline">¶</a></h3>
<p>The following parameters are available filters using the MAST query service. To use any of these filters, add the filter as the ‘paramName’ and the various options you would like to filter by as the ‘values’.</p>
<p>In addition to being used as filters, if you would like to return something other than the filename, any of these keys can also be used to access or return any component of the result. For instance, instead of printing the filenames with “result[‘filename’]” as shown above, one could print the PI name by replacing this with “result[‘pi_name’]”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dictionary keys of all of the NIRSpec data (without any filters):</span>
<span class="n">all_keys</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_keys</span><span class="p">:</span>
            <span class="n">all_keys</span> <span class="o">=</span> <span class="n">all_keys</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">all_keys</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># print all keys without the last comma</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ArchiveFileID, filename, fileSetName, productLevel, act_id, apername, asnpool, asntable, bartdelt, bendtime, bkgdtarg, bkglevel, bkgsub, bmidtime, bstrtime, category, cont_id, refframe, datamode, dataprob, date, date_mjd, date_end, date_end_mjd, date_obs, date_obs_mjd, detector, drpfrms1, drpfrms3, duration, dva_dec, dva_ra, effexptm, effinttm, eng_qual, eph_time, eph_type, exp_type, expcount, expend, expmid, exposure, expripar, expstart, fastaxis, filetype, filter, frmdivsr, gainfact, gdstarid, groupgap, gs_dec, gs_mag, gs_order, gs_ra, gsendtim, gsendtim_mjd, gsstrttm, gsstrttm_mjd, gs_udec, gs_umag, gs_ura, helidelt, hendtime, hga_move, hmidtime, hstrtime, instrume, intarget, is_psf, jwst_dx, jwst_dy, jwst_dz, jwst_x, jwst_y, jwst_z, lamp, mu_dec, mu_epoch, mu_epoch_mjd, mu_ra, nexposur, nextend, nframes, ngroups, nints, nresets, nrststrt, nsamples, numdthpt, nwfsest, obs_id, observtn, obslabel, origin, pcs_mode, pi_name, pps_aper, prd_ver, program, prop_dec, prop_ra, pwfseet, readpatt, sca_num, scicat, sdp_ver, selfref, seq_id, slowaxis, subarray, subcat, subsize1, subsize2, substrt1, substrt2, targ_dec, targ_ra, targname, targoopp, targprop, targtype, targudec, targura, telescop, template, tframe, tgroup, timesys, title, tsample, tsovisit, visit_id, visitend, visitend_mjd, visitgrp, visitsta, visitype, vststart, vststart_mjd, xoffset, yoffset, zerofram, errtype, rois, roiw, wpower, wtype, datamodl, exp_only, exsegnum, exsegtot, intstart, intend, date_beg, date_beg_mjd, obsfoldr, sctarate, opmode, osf_file, expsteng, expsteng_mjd, masterbg, scatfile, srctyapt, tcatfile, texptime, s_region, fcsrlpos, focuspos, fxd_slit, grating, gwa_pxav, gwa_pyav, gwa_tilt, gwa_xp_v, gwa_xtil, gwa_yp_v, gwa_ytil, is_imprt, msaconid, msametfl, msametid, msastate, patt_num, pattsize, preimage, rma_pos, subpxnum, subpxpat, subpxpns, nrs_norm, nrs_ref, patttype, pattstrt, fileSize, checksum, ingestStartDate, ingestStartDate_mjd, ingestCompletionDate, ingestCompletionDate_mjd, FileTypeID, publicReleaseDate, publicReleaseDate_mjd, isRestricted, isItar, isStale, FileSetId, dataURI
</pre></div>
</div>
</div>
</div>
<p>Note that some of the above parameters are specific to a particular observation mode. For instance, ‘msaconid’, ‘msametfl’, ‘msametid’, and ‘msastate’ correspond to MOS observations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># All options for a given parameter (eg, exp_type):</span>
<span class="n">exp_type_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="n">exp_type_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;exp_type&#39;</span><span class="p">])</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;exp_type&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exp_type_list</span> <span class="k">else</span> <span class="n">exp_type_list</span>
<span class="k">for</span> <span class="n">exp_type</span> <span class="ow">in</span> <span class="n">exp_type_list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exp_type</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NRS_IFU
NRS_MSASPEC
NRS_BRIGHTOBJ
NRS_DARK
NRS_AUTOWAVE
NRS_LAMP
NRS_AUTOFLAT
NRS_IMAGE
NRS_CONFIRM
NRS_FIXEDSLIT
NRS_MIMF
NRS_FOCUS
NRS_TACONFIRM
NRS_WATA
NRS_MSATA
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="potential-duplication-checks">
<h2>Potential Duplication Checks<a class="headerlink" href="#potential-duplication-checks" title="Permalink to this headline">¶</a></h2>
<p>Duplication for NIRSpec might occur if there is a target within the duplication search radius that not only uses the same grating and disperser but also has an exposure time within a factor of four of that of the previous observation. In wide field imaging, the field overlap must be greater than 50% to be considered a duplicate. More information on <a class="reference external" href="https://jwst-docs.stsci.edu/jwst-duplication-checking/identifying-potential-duplicate-observations">identifying potential duplicate observations</a> might be useful for observers.</p>
<p>In this demonstration, an input catalog is used to search an area with a radius equal to the longest side of the aperture, query for those observations matching the wavelength and exposure time criteria, and find sources in the archive which might be duplications for any target in the catalog.</p>
<p>While the <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/api/astroquery.mast.MastClass.html#astroquery.mast.MastClass.service_request_async">Mast.service_request_async()</a> shown above is a useful method for filtering data with metadata parameters, the <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/mast/mast.html#observation-criteria-queries">Observations.query_criteria()</a> is used in this case to search a particular region of the sky with additional parameters.</p>
<p>Duplication search radii are dependent on aperture sizes, which are described in the <a class="reference external" href="https://jwst-docs.stsci.edu/near-infrared-spectrograph/nirspec-instrumentation/nirspec-fixed-slits#:~:text=NIRSpec%20has%20five%20fixed%20slits,series%20(BOTS)%20observing%20mode">NIRSpec Fixed Slits JDox page</a>. The longest side of the slit is used for the fixed slit duplication search radius. The following cell contains duplication search radii for each NIRSpec aperture in degrees.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default duplication search radii</span>
<span class="n">mos_radius</span> <span class="o">=</span> <span class="mi">180</span><span class="o">/</span><span class="mi">360</span>  <span class="c1"># arcseconds/360 to get degrees</span>
<span class="n">mos_slit_radius</span> <span class="o">=</span> <span class="mf">0.46</span><span class="o">/</span><span class="mi">360</span> <span class="c1"># arcseconds/360 to get degrees</span>
<span class="n">ifu_radius</span> <span class="o">=</span> <span class="mi">3</span><span class="o">/</span><span class="mi">360</span>  <span class="c1"># arcseconds/360 to get degrees</span>
<span class="n">fs_S1600A1_radius</span> <span class="o">=</span> <span class="mf">1.6</span><span class="o">/</span><span class="mi">360</span>  <span class="c1"># arcseconds/360 to get degrees</span>
<span class="n">fs_S200A1_radius</span> <span class="o">=</span> <span class="mf">3.3</span><span class="o">/</span><span class="mi">360</span>  <span class="c1"># arcseconds/360 to get degrees</span>
<span class="n">fs_S200A2_radius</span> <span class="o">=</span> <span class="mf">3.3</span><span class="o">/</span><span class="mi">360</span>  <span class="c1"># arcseconds/360 to get degrees</span>
<span class="n">fs_S400A1_radius</span> <span class="o">=</span> <span class="mf">3.8</span><span class="o">/</span><span class="mi">360</span>  <span class="c1"># arcseconds/360 to get degrees</span>
<span class="n">fs_S200B1_radius</span> <span class="o">=</span> <span class="mf">3.3</span><span class="o">/</span><span class="mi">360</span>  <span class="c1"># arcseconds/360 to get degrees</span>
</pre></div>
</div>
</div>
</div>
<p>The search area to use in the potential duplicate observation search is determined by the longest side of the aperture as defined above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">search_area</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;MSA&quot;</span><span class="p">:</span> <span class="n">mos_radius</span><span class="p">,</span> <span class="s2">&quot;IFU&quot;</span><span class="p">:</span> <span class="n">ifu_radius</span><span class="p">,</span> <span class="s2">&quot;S1600A1&quot;</span><span class="p">:</span> <span class="n">fs_S1600A1_radius</span><span class="p">,</span> <span class="s2">&quot;S200A1&quot;</span><span class="p">:</span> <span class="n">fs_S200A1_radius</span><span class="p">,</span>
               <span class="s2">&quot;S200A2&quot;</span><span class="p">:</span> <span class="n">fs_S200A2_radius</span><span class="p">,</span> <span class="s2">&quot;S400A1&quot;</span><span class="p">:</span> <span class="n">fs_S400A1_radius</span><span class="p">,</span> <span class="s2">&quot;S200B1&quot;</span><span class="p">:</span> <span class="n">fs_S200B1_radius</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>The value labeled ‘instrument_name’ in this case includes both the instrument and mode. This dictionary is used to determine the appropriate name to use in the query.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">instrument_name</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;MSA&quot;</span><span class="p">:</span> <span class="s2">&quot;NIRSPEC/MSA&quot;</span><span class="p">,</span> <span class="s2">&quot;IFU&quot;</span><span class="p">:</span> <span class="s2">&quot;NIRSPEC/IFU&quot;</span><span class="p">,</span> <span class="s2">&quot;S1600A1&quot;</span><span class="p">:</span> <span class="s2">&quot;NIRSPEC/SLIT&quot;</span><span class="p">,</span> <span class="s2">&quot;S200A1&quot;</span><span class="p">:</span> <span class="s2">&quot;NIRSPEC/SLIT&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;S200A2&quot;</span><span class="p">:</span> <span class="s2">&quot;NIRSPEC/SLIT&quot;</span><span class="p">,</span> <span class="s2">&quot;S400A1&quot;</span><span class="p">:</span> <span class="s2">&quot;NIRSPEC/SLIT&quot;</span><span class="p">,</span> <span class="s2">&quot;S200B1&quot;</span><span class="p">:</span> <span class="s2">&quot;NIRSPEC/SLIT&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Setup input catalog containing the target catalog number, aperture, RA, DEC, grating, filter, exposure time, search area, and instrument/mode name for each target. This format was chosen so that additional targets can easily be added to the input catalog list. Although these are the primary considerations for duplication checking, additional criteria can also be added using this dictionary format. It may be useful to check which <a class="reference external" href="https://mast.stsci.edu/api/v0/_c_a_o_mfields.html">observation fields</a> are available for filtering NIRSpec data using Astroquery.</p>
<p>Note that NIRSpec FS or IFU spectroscopic observations can be considered duplications of MOS observations of the same astronomical target with similar wavelength coverage and resolution. Thus, it may be helpful to query for MOS observations as well when searching for FS or IFU observation potential duplicates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Input Catalog to use in query</span>

<span class="n">target1_number</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>
<span class="n">target1_aperture</span> <span class="o">=</span> <span class="s2">&quot;MSA&quot;</span>
<span class="n">target1_RA</span> <span class="o">=</span> <span class="mf">53.13</span>
<span class="n">target1_DEC</span> <span class="o">=</span> <span class="o">-</span><span class="mf">27.8</span>
<span class="n">target1_grating</span> <span class="o">=</span> <span class="s2">&quot;G395H&quot;</span>
<span class="n">target1_filters</span> <span class="o">=</span> <span class="s2">&quot;F290LP&quot;</span>
<span class="n">target1_exposure_time</span> <span class="o">=</span> <span class="mi">950</span>
<span class="n">target1_search_area</span> <span class="o">=</span> <span class="n">search_area</span><span class="p">[</span><span class="n">target1_aperture</span><span class="p">]</span>
<span class="n">target1_instrument_name</span> <span class="o">=</span> <span class="n">instrument_name</span><span class="p">[</span><span class="n">target1_aperture</span><span class="p">]</span>
<span class="n">target1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="n">target1_number</span><span class="p">,</span> <span class="s1">&#39;RA&#39;</span><span class="p">:</span> <span class="n">target1_RA</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">:</span> <span class="n">target1_DEC</span><span class="p">,</span> <span class="s1">&#39;grating&#39;</span><span class="p">:</span> <span class="n">target1_grating</span><span class="p">,</span> 
           <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="n">target1_filters</span><span class="p">,</span> <span class="s1">&#39;exposure_time&#39;</span><span class="p">:</span> <span class="n">target1_exposure_time</span><span class="p">,</span> <span class="s1">&#39;search_area&#39;</span><span class="p">:</span> <span class="n">target1_search_area</span><span class="p">,</span>
           <span class="s1">&#39;instrument_name&#39;</span><span class="p">:</span> <span class="n">target1_instrument_name</span><span class="p">}</span>

<span class="n">target2_number</span> <span class="o">=</span> <span class="s2">&quot;2&quot;</span>
<span class="n">target2_aperture</span> <span class="o">=</span> <span class="s2">&quot;IFU&quot;</span>
<span class="n">target2_RA</span> <span class="o">=</span> <span class="mf">68.73091</span>
<span class="n">target2_DEC</span> <span class="o">=</span> <span class="mf">24.48140</span>
<span class="n">target2_grating</span> <span class="o">=</span> <span class="s2">&quot;G395H&quot;</span>
<span class="n">target2_filters</span> <span class="o">=</span> <span class="s2">&quot;F290LP&quot;</span>
<span class="n">target2_exposure_time</span> <span class="o">=</span> <span class="mf">22.749</span>
<span class="n">target2_search_area</span> <span class="o">=</span> <span class="n">search_area</span><span class="p">[</span><span class="n">target2_aperture</span><span class="p">]</span>
<span class="n">target2_instrument_name</span> <span class="o">=</span> <span class="n">instrument_name</span><span class="p">[</span><span class="n">target2_aperture</span><span class="p">]</span>
<span class="n">target2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="n">target2_number</span><span class="p">,</span> <span class="s1">&#39;RA&#39;</span><span class="p">:</span> <span class="n">target2_RA</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">:</span> <span class="n">target2_DEC</span><span class="p">,</span> <span class="s1">&#39;grating&#39;</span><span class="p">:</span> <span class="n">target2_grating</span><span class="p">,</span>
           <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="n">target2_filters</span><span class="p">,</span> <span class="s1">&#39;exposure_time&#39;</span><span class="p">:</span> <span class="n">target2_exposure_time</span><span class="p">,</span> <span class="s1">&#39;search_area&#39;</span><span class="p">:</span> <span class="n">target2_search_area</span><span class="p">,</span>
           <span class="s1">&#39;instrument_name&#39;</span><span class="p">:</span> <span class="n">target2_instrument_name</span><span class="p">}</span> 
           
<span class="n">target3_number</span> <span class="o">=</span> <span class="s2">&quot;3&quot;</span>
<span class="n">target3_aperture</span> <span class="o">=</span> <span class="s2">&quot;S200B1&quot;</span>
<span class="n">target3_RA</span> <span class="o">=</span> <span class="mf">5.130</span>
<span class="n">target3_DEC</span> <span class="o">=</span> <span class="o">-</span><span class="mf">36.895</span>
<span class="n">target3_grating</span> <span class="o">=</span> <span class="s2">&quot;G140H&quot;</span>
<span class="n">target3_filters</span> <span class="o">=</span> <span class="s2">&quot;F070LP&quot;</span>
<span class="n">target3_exposure_time</span> <span class="o">=</span> <span class="mf">1880.22</span>
<span class="n">target3_search_area</span> <span class="o">=</span> <span class="n">search_area</span><span class="p">[</span><span class="n">target3_aperture</span><span class="p">]</span>
<span class="n">target3_instrument_name</span> <span class="o">=</span> <span class="n">instrument_name</span><span class="p">[</span><span class="n">target3_aperture</span><span class="p">]</span>
<span class="n">target3</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="n">target3_number</span><span class="p">,</span> <span class="s1">&#39;RA&#39;</span><span class="p">:</span> <span class="n">target3_RA</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">:</span> <span class="n">target3_DEC</span><span class="p">,</span> <span class="s1">&#39;grating&#39;</span><span class="p">:</span> <span class="n">target3_grating</span><span class="p">,</span>
           <span class="s1">&#39;filters&#39;</span><span class="p">:</span> <span class="n">target3_filters</span><span class="p">,</span> <span class="s1">&#39;exposure_time&#39;</span><span class="p">:</span> <span class="n">target3_exposure_time</span><span class="p">,</span> <span class="s1">&#39;search_area&#39;</span><span class="p">:</span> <span class="n">target3_search_area</span><span class="p">,</span>
           <span class="s1">&#39;instrument_name&#39;</span><span class="p">:</span> <span class="n">target3_instrument_name</span><span class="p">}</span> 

<span class="n">input_catalog</span> <span class="o">=</span> <span class="p">[</span><span class="n">target1</span><span class="p">,</span> <span class="n">target2</span><span class="p">,</span> <span class="n">target3</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Import <a class="reference external" href="https://astroquery.readthedocs.io/en/latest/mast/mast.html#observation-criteria-queries">MAST’s Observations package</a> in order to query based on particular criteria other than position or target name. This package also allows you to search by ‘proposal_pi’ or other <a class="reference external" href="https://mast.stsci.edu/api/v0/_c_a_o_mfields.html">observation fields</a>. In the case of duplication checking, this query format is particularly useful because it allows users to search within a minimum and maximum RA and Dec value in addition to other parameters such as filters and gratings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astroquery.mast</span> <span class="kn">import</span> <span class="n">Observations</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<p>Next, a dictionary is generated using the target’s catalog number as a key which contains observation tables for each target in the input catalog.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate dictionary of observation tables</span>
<span class="n">table</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">input_catalog</span><span class="p">:</span>  <span class="c1"># Loop through all targets in catalog</span>
    <span class="n">key</span><span class="o">=</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span>
    <span class="c1"># Perform query using information in the input catalog</span>
    <span class="n">table</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">instrument_name</span> <span class="o">=</span> <span class="n">target</span><span class="p">[</span><span class="s1">&#39;instrument_name&#39;</span><span class="p">],</span>
                     <span class="n">s_ra</span><span class="o">=</span><span class="p">[(</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;RA&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">]),(</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;RA&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">])],</span>
                     <span class="n">s_dec</span><span class="o">=</span><span class="p">[</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;DEC&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">],</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;DEC&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">]],</span>
                     <span class="n">grating</span><span class="o">=</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;grating&#39;</span><span class="p">],</span>
                     <span class="n">filters</span><span class="o">=</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;filters&#39;</span><span class="p">],</span>
                     <span class="n">t_exptime</span><span class="o">=</span><span class="p">[(</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;exposure_time&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">4</span><span class="p">,(</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;exposure_time&#39;</span><span class="p">])</span><span class="o">*</span><span class="mi">4</span><span class="p">])</span>
    <span class="c1"># Perform query for MOS data since FS and IFU observations can also be duplicates of MOS observations</span>
    <span class="k">if</span> <span class="n">target</span><span class="p">[</span><span class="s1">&#39;instrument_name&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;NIRSPEC/MSA&quot;</span><span class="p">:</span>
        <span class="n">table</span><span class="p">[</span><span class="n">key</span><span class="o">+</span><span class="s2">&quot;MOS&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">query_criteria</span><span class="p">(</span><span class="n">instrument_name</span> <span class="o">=</span> <span class="s2">&quot;NIRSPEC/MSA&quot;</span><span class="p">,</span>
                         <span class="n">s_ra</span><span class="o">=</span><span class="p">[</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;RA&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">],</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;RA&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">]],</span>
                         <span class="n">s_dec</span><span class="o">=</span><span class="p">[</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;DEC&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">],</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;DEC&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;search_area&#39;</span><span class="p">]],</span>
                         <span class="n">grating</span><span class="o">=</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;grating&#39;</span><span class="p">],</span>
                         <span class="n">filters</span><span class="o">=</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;filters&#39;</span><span class="p">],</span>
                         <span class="n">t_exptime</span><span class="o">=</span><span class="p">[(</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;exposure_time&#39;</span><span class="p">])</span><span class="o">/</span><span class="mi">4</span><span class="p">,(</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;exposure_time&#39;</span><span class="p">])</span><span class="o">*</span><span class="mi">4</span><span class="p">]</span>
                         <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;The observation table below contains potential duplicate observations for </span>
<span class="s2">          target </span><span class="si">{}</span><span class="s2"> in the input catalog.&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="n">key</span><span class="p">][:</span><span class="mi">5</span><span class="p">])</span>  <span class="c1"># Remove the [:5] indexing to display all results</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING: InputWarning: Filter grating does not exist. This filter will be skipped. [astroquery.mast.core]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The observation table below contains potential duplicate observations for 
          target 1 in the input catalog.
dataproduct_type calib_level obs_collection ...    obsid       objID   
---------------- ----------- -------------- ... ----------- -----------
        spectrum          -1           JWST ... 10000001998 10000001998
        spectrum          -1           JWST ... 10000001999 10000001999
        spectrum          -1           JWST ... 10000002000 10000002000
        spectrum          -1           JWST ... 10000002019 10000002019
        spectrum          -1           JWST ... 10000002020 10000002020
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>WARNING: NoResultsWarning: Query returned no results. [astroquery.mast.core]
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The observation table below contains potential duplicate observations for 
          target 2 in the input catalog.
dataproduct_type calib_level obs_collection ...    obsid       objID   
---------------- ----------- -------------- ... ----------- -----------
        spectrum          -1           JWST ... 10000012222 10000012222
        spectrum          -1           JWST ... 10000012223 10000012223
        spectrum          -1           JWST ... 10000012224 10000012224
        spectrum          -1           JWST ... 10000012225 10000012225

The observation table below contains potential duplicate observations for 
          target 3 in the input catalog.
dataproduct_type calib_level obs_collection ...    obsid       objID   
---------------- ----------- -------------- ... ----------- -----------
           image          -1           JWST ... 10000007643 10000007643
           image          -1           JWST ... 10000007644 10000007644
           image          -1           JWST ... 10000007645 10000007645
           image          -1           JWST ... 10000007646 10000007646
           image          -1           JWST ... 10000007647 10000007647
</pre></div>
</div>
</div>
</div>
<p>Because it is important to check these observations in APT to determine more robustly whether or not these potential duplicate observations would indeed be considered duplications, this tool can be used to retrieve the proposal IDs that can then be searched in APT.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Print a list of the proposal IDs generated in the full table</span>
<span class="n">proposal_ids</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">input_catalog</span><span class="p">:</span>  <span class="c1"># Go through every target in the input catalog</span>
    <span class="k">for</span> <span class="n">proposal_id</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]][</span><span class="s1">&#39;proposal_id&#39;</span><span class="p">]:</span>  <span class="c1"># Loop through proposal IDs for each observation</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">proposal_id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">proposal_ids</span><span class="p">:</span>  <span class="c1"># Remove duplicates</span>
            <span class="n">proposal_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">proposal_id</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;It may be helpful to check these proposal IDs in APT to compare proposal details:&quot;</span><span class="p">,</span> <span class="n">proposal_ids</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>It may be helpful to check these proposal IDs in APT to compare proposal details: [1180, 1207, 1210, 1212, 1286, 1287, 1282, 1222]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get list of Product Group ID (obsid rather than Observation ID / obs_id)</span>
<span class="n">obs_ids</span><span class="o">=</span><span class="p">[]</span>
<span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">input_catalog</span><span class="p">:</span>  <span class="c1"># Go through every target in the input catalog</span>
    <span class="k">for</span> <span class="n">obs_id</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="n">target</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]][</span><span class="s1">&#39;obsid&#39;</span><span class="p">]:</span>  <span class="c1"># Loop through proposal IDs for each observation</span>
        <span class="k">if</span> <span class="n">obs_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">obs_ids</span><span class="p">:</span>  <span class="c1"># Remove duplicates</span>
            <span class="n">obs_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obs_id</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Product group IDs:&#39;</span><span class="p">,</span> <span class="n">obs_ids</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Product group IDs: [&#39;10000001998&#39;, &#39;10000001999&#39;, &#39;10000002000&#39;, &#39;10000002019&#39;, &#39;10000002020&#39;, &#39;10000002021&#39;, &#39;10000002046&#39;, &#39;10000002047&#39;, &#39;10000002048&#39;, &#39;10000002067&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download data products based on a Product Group ID such as &#39;2003839997&#39;</span>
<span class="c1"># Data will download to a folder named &quot;mastDownload&quot; in present working directory unless a download directory is given as a parameter.</span>
<span class="c1"># Warning: This cell may take a few minutes to run.</span>
<span class="n">product_group_ID</span> <span class="o">=</span> <span class="s1">&#39;2003839997&#39;</span>
<span class="n">manifest</span> <span class="o">=</span> <span class="n">Observations</span><span class="o">.</span><span class="n">download_products</span><span class="p">(</span><span class="n">product_group_ID</span><span class="p">,</span> <span class="n">download_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/getdata.cgi?download=1&amp;filename=hst_11635_11_wfc3_uvis_f469n_daophot_trm.cat to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n/hst_11635_11_wfc3_uvis_f469n_daophot_trm.cat ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/getdata.cgi?download=1&amp;filename=hst_11635_11_wfc3_uvis_f469n_sexphot_trm.cat to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n/hst_11635_11_wfc3_uvis_f469n_sexphot_trm.cat ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/preview.cgi?dataset=hst_11635_11_wfc3_uvis_f469n to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n/hst_11635_11_wfc3_uvis_f469n_drz.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/getdata.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_drz.fits to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n/hst_11635_11_wfc3_uvis_f469n_drz.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/preview.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_01 to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_01/hst_11635_11_wfc3_uvis_f469n_01_drz.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/getdata.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_01_drz.fits to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_01/hst_11635_11_wfc3_uvis_f469n_01_drz.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/preview.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_02 to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_02/hst_11635_11_wfc3_uvis_f469n_02_drz.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/getdata.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_02_drz.fits to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_02/hst_11635_11_wfc3_uvis_f469n_02_drz.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/preview.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_03 to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_03/hst_11635_11_wfc3_uvis_f469n_03_drz.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/getdata.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_03_drz.fits to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_03/hst_11635_11_wfc3_uvis_f469n_03_drz.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/preview.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_04 to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_04/hst_11635_11_wfc3_uvis_f469n_04_drz.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HLA/url/cgi-bin/getdata.cgi?dataset=hst_11635_11_wfc3_uvis_f469n_04_drz.fits to ./mastDownload/HLA/hst_11635_11_wfc3_uvis_f469n_04/hst_11635_11_wfc3_uvis_f469n_04_drz.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_jif.fits to ./mastDownload/HST/ib3p11010/ib3p11010_jif.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_jit.fits to ./mastDownload/HST/ib3p11010/ib3p11010_jit.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_spt.fits to ./mastDownload/HST/ib3p11010/ib3p11010_spt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_trl.fits to ./mastDownload/HST/ib3p11010/ib3p11010_trl.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_asn.fits to ./mastDownload/HST/ib3p11010/ib3p11010_asn.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_log.txt to ./mastDownload/HST/ib3p11010/ib3p11010_log.txt ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_drc.jpg to ./mastDownload/HST/ib3p11010/ib3p11010_drc.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_drz.jpg to ./mastDownload/HST/ib3p11010/ib3p11010_drz.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_drc.fits to ./mastDownload/HST/ib3p11010/ib3p11010_drc.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11010_drz.fits to ./mastDownload/HST/ib3p11010/ib3p11010_drz.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_flt_hlet.fits to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_flt_hlet.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_spt.fits to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_spt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_trl.fits to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_trl.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_log.txt to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_log.txt ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_raw.jpg to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_raw.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_flc.jpg to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_flc.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_flt.jpg to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_flt.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_flc.fits to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_flc.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_flt.fits to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_flt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p7q_raw.fits to ./mastDownload/HST/ib3p11p7q/ib3p11p7q_raw.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_flt_hlet.fits to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_flt_hlet.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_spt.fits to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_spt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_trl.fits to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_trl.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_log.txt to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_log.txt ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_raw.jpg to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_raw.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_flc.jpg to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_flc.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_flt.jpg to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_flt.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_flc.fits to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_flc.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_flt.fits to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_flt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11p8q_raw.fits to ./mastDownload/HST/ib3p11p8q/ib3p11p8q_raw.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_flt_hlet.fits to ./mastDownload/HST/ib3p11phq/ib3p11phq_flt_hlet.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_spt.fits to ./mastDownload/HST/ib3p11phq/ib3p11phq_spt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_trl.fits to ./mastDownload/HST/ib3p11phq/ib3p11phq_trl.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_log.txt to ./mastDownload/HST/ib3p11phq/ib3p11phq_log.txt ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_raw.jpg to ./mastDownload/HST/ib3p11phq/ib3p11phq_raw.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_flc.jpg to ./mastDownload/HST/ib3p11phq/ib3p11phq_flc.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_flt.jpg to ./mastDownload/HST/ib3p11phq/ib3p11phq_flt.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_flc.fits to ./mastDownload/HST/ib3p11phq/ib3p11phq_flc.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_flt.fits to ./mastDownload/HST/ib3p11phq/ib3p11phq_flt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11phq_raw.fits to ./mastDownload/HST/ib3p11phq/ib3p11phq_raw.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_flt_hlet.fits to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_flt_hlet.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_spt.fits to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_spt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_trl.fits to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_trl.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_log.txt to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_log.txt ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_raw.jpg to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_raw.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_flc.jpg to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_flc.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_flt.jpg to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_flt.jpg ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_flc.fits to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_flc.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_flt.fits to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_flt.fits ... [Done]
Downloading URL https://mast.stsci.edu/api/v0.1/Download/file?uri=mast:HST/product/ib3p11q9q_raw.fits to ./mastDownload/HST/ib3p11q9q/ib3p11q9q_raw.fits ... [Done]
</pre></div>
</div>
</div>
</div>
<p>Note that if you would like to access proprietary data, you may need to log in first. More information can be found in the documenation on <a class="reference external" href="https://astroquery.readthedocs.io/en/v0.3.7/mast/mast.html#accessing-proprietary-data">Accessing Proprietary Data</a>.</p>
<div class="section" id="additional-resources">
<h3>Additional Resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline">¶</a></h3>
<p>A <a class="reference external" href="https://github.com/spacetelescope/JWST_Planned_Observations/blob/master/Querying_JWST_in_astroquery.ipynb">notebook</a> is available which shows a target field by querying position. Another notebook provides details on <a class="reference external" href="https://github.com/spacetelescope/JWST_Planned_Observations/blob/master/Querying_JWST_in_mashup.ipynb">Mashup</a>. These notebooks may be useful for more general JWST duplication checking, as they provide information such as uploading a target list of files or visualizing results in <a class="reference external" href="https://aladin.u-strasbg.fr/">Aladin</a>.</p>
<p>As noted in more detail in <a class="reference external" href="https://jwst-docs.stsci.edu/jwst-duplication-checking/identifying-potential-duplicate-observations#IdentifyingPotentialDuplicateObservations-Portaltargetsearch">Identifying Potential Duplicate Observations</a>, it is essential to check these targets in <a class="reference external" href="https://www.stsci.edu/scientific-community/software/astronomers-proposal-tool-apt">APT</a>.</p>
<p>If you use astroquery, please cite the paper <a class="reference external" href="https://ui.adsabs.harvard.edu/abs/2019AJ....157...98G/abstract">Ginsburg, Sipőcz, Brasseur et al 2019</a>.</p>
<div class="section" id="about-this-notebook">
<h4>About this Notebook:<a class="headerlink" href="#about-this-notebook" title="Permalink to this headline">¶</a></h4>
<p><em><strong>Author:</strong></em> Teagan King, Science Support Analyst</p>
<p><em><strong>Date Updated:</strong></em> March 12, 2021</p>
<hr class="docutils" />
<p><a class="reference external" href="#top">Top of Page</a>
<img style="float: right;" src="https://raw.githubusercontent.com/spacetelescope/notebooks/master/assets/stsci_pri_combo_mark_horizonal_white_bkgd.png" alt="Space Telescope Logo" width="200px"/></p>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks/NIRSpec_MAST_Query"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Captain Jupyter<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>